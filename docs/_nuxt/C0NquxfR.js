import{H as G,a as R,T as Q,b as U,_ as E}from"./EAoRHt6t.js";import{i as x,_ as P}from"./DKOAaGKP.js";import{t as N,s as j,_ as M}from"./CVd2qpxV.js";import{_ as q,u as z,y as O,s as J,z as D,B as m,C as v,l as C,D as K,o as c,c as d,b as a,w as W,a as i,j as H,k as g,n as _,d as k,F as w,t as f,A as I,E as X,g as y,v as Y,q as A,x as Z,p as V,e as $}from"./DY6lgNKQ.js";import{d as tt}from"./BoO1yoxs.js";import"./C2Q4VJJZ.js";import"./CjjDkIpG.js";const et={name:"LearningSentences",setup(){var b;const e=z(),t=O(),{loading:l,allData:o,arabic:n}=J(e),s=(b=t==null?void 0:t.params)==null?void 0:b.id,h=D(()=>m(l.value)||m(o.value)||m(n.value)?!0:l.value),p=D(()=>{var T;return x(n.value)?null:(T=n.value)==null?void 0:T.find(L=>L.lession===s)});return{currentRouteId:s,loading:h,specificLession:p}},data(){return{debouncedGoNext:tt(this.goNext,1e3),inputText:"",learning:"Arabic",currentIndex:0,correct:!1,initial:!0,inCorrect:!1,preventGoNext:!1,allWords:[],askWhatToDo:!0,settings:{showHint:!0,hintLetters:0,showWord:!1}}},computed:{learningWord(){return this.learning==="Arabic"?this.currentWord.arabic:this.currentWord.english},placeholderText(){return m(this.currentWord)?"":this.settings.showHint?`Fill in: ${this.learningWord}`:this.settings.showWord?`Fill in: ${this.learningWord}`:this.settings.hintLetters>0?`Fill in: ${this.learningWord.substring(0,this.settings.hintLetters)}`:""},showHintIcons(){return this.settings.showHint?!1:this.placeholderText!==`Fill in: ${this.learningWord}`},currentWord(){return x(this.specificLession)?null:this.allWords[this.currentIndex]}},watch:{specificLession:{handler(e,t){x(e)||m(e)||this.reloadQuestion(e.data)},immediate:!0},"settings.hintLetters":{handler(e,t){t!==e&&e!==0&&!this.settings.showHint&&e>0&&(this.inputText="",this.placeholderText===`Fill in: ${this.learningWord}`&&(this.settings.showWord=!0))}},"settings.showWord":{handler(e,t){t!==e&&!this.settings.showHint&&e&&(this.inputText="",this.settings.hintLetters=0)}},learning:{handler(e,t){t!==e&&(this.currentIndex=0,this.inputText="",this.shuffle(),this.settings={showHint:this.settings.showHint,hintLetters:0,showWord:!1})}},askWhatToDo:{handler(e,t){t!==e&&e&&(this.currentIndex=0,this.inputText="",this.allWords=v(this.allWords,(l,o)=>({...l,id:o+1,correct:!1,star:!1})))}},currentIndex:{handler(e,t){if(t!==e&&(this.inputText="",this.settings.showWord=!1,this.settings.hintLetters=0,this.allWords[e].correct)){const l=this.splitString(this.learningWord);this.inputText=l[0].toLowerCase()}}}},mounted(){},methods:{textChange(e){if(this.preventGoNext)return;const t=e.target.value.toLowerCase();this.inputText=t;const l=this.parseText(this.learningWord);this.splitString(l).includes(t)?(this.correct=!0,this.debouncedGoNext(!1),this.preventGoNext=!0,setTimeout(()=>{this.preventGoNext=!1},2e3)):this.inCorrect=!0,setTimeout(()=>{this.inCorrect=!1,this.correct=!1},2e3)},parseText(e){let t=e.toLowerCase();return t.includes("(p)")&&(t=t.replace("(p)","")),t.includes("(a)")&&(t=t.replace("(a)","")),t.includes("(s)")&&(t=t.replace("(s)","")),t.includes("(m)")&&(t=t.replace("(m)","")),t.includes("(i)")&&(t=t.replace("(i)","")),t.includes("____")&&(t=t.replace("____","")),t},splitString(e){let t=[];return e.includes("/")?t=e.split("/").map(l=>l.trim()):t=[e.trim()],t=t.map(l=>(l=this.parseText(l),l)),t},goNext(e=!1){const t=this.inputText.toLowerCase(),l=this.parseText(this.learningWord),o=this.splitString(l);this.allWords[this.currentIndex].correct=e?!0:o.includes(t);const n=C(this.allWords,s=>!s.correct&&s.visible);if(x(n)){setTimeout(()=>{const s=C(this.allWords,h=>h.star&&h.visible);if(x(s)){this.reloadQuestion(this.specificLession.data),this.askWhatToDo=!0,N.alert("Great job!",4e3,"success");return}else N.alert("Only star questions are shown.",4e3,"info"),this.allWords=C(this.allWords,h=>h.star),this.allWords=v(this.allWords,(h,p)=>({...h,id:p+1,correct:!1})),this.currentIndex=0,this.inputText=""},1e3);return}if(this.currentIndex===this.allWords.length-1){this.inCorrect=!0;const s=K(this.allWords,h=>!h.correct);this.currentIndex=s,setTimeout(()=>{this.inCorrect=!1},1e3);return}this.currentIndex++},shuffle(){this.allWords=j(this.allWords),this.currentIndex=0,this.inputText="",this.allWords=v(this.allWords,(e,t)=>({...e,id:t+1,correct:!1}))},goPrevious(){if(this.currentIndex===0)return;const e=this.inputText.toLowerCase(),t=this.parseText(this.learningWord),l=this.splitString(t);this.allWords[this.currentIndex].correct=l.includes(e),this.currentIndex--},whatToDoNext(e){e==="learn-with-hint"?this.settings.showHint=!0:e==="learn-no-hint"&&(this.settings.showHint=!1),this.shuffle(),this.settings.hintLetters=0,this.settings.showWord=!1,this.askWhatToDo=!1,this.inputText="",this.initial=!1},setStar(e){this.allWords[this.currentIndex].star=e},reloadQuestion(e){this.allWords=e,this.allWords=v(this.allWords,(t,l)=>({...t,id:l+1,correct:!1,star:!1,visible:!0}))},learnStars(e){const t=C(this.allWords,l=>l.star);if(x(t)){N.alert("No stars found.",4e3,"info");return}this.allWords=t,this.settings.showHint=e,this.settings.hintLetters=0,this.settings.showWord=!1,this.allWords=v(this.allWords,(l,o)=>({...l,id:o+1,correct:!1})),this.currentIndex=0,this.inputText=""},unstarAll(){this.allWords=v(this.allWords,(e,t)=>({...e,id:t+1,star:!1}))},correctNextQuestion(){this.allWords[this.currentIndex].correct=!0,this.goNext(!0)}}},F=e=>(V("data-v-39d4b65c"),e=e(),$(),e),st={class:"body"},it={class:"navigate-home"},nt={class:"actions no-select"},rt={class:"learn"},lt=F(()=>i("span",{class:"label"},"Learning",-1)),ot={key:0,class:"actions-content mobile"},at={key:0,class:"actions-content desktop"},ct={class:"gold"},ht={key:1,class:"learning"},dt={key:0,class:"card-item"},ut={class:""},ft={class:"gold"},gt={key:1},pt={class:"gold"},xt={class:"input-container"},vt={class:"left"},kt={class:"input"},mt=["placeholder"],Wt={class:"icons clickable"},_t={class:"right"},wt={class:"label-status"},bt={class:"left"},Tt={class:"text"},Ct={class:"right"},It={class:"navigation-container no-select"},Lt={class:"pagination"},St=["onClick"],Nt={key:2,class:"ask-what-to-do"},yt=F(()=>i("h4",null,"What do you want to do?",-1)),Dt={class:"buttons"};function Ht(e,t,l,o,n,s){const h=Q,p=G,b=U,T=P,L=M,u=E,B=R;return c(),d("div",{class:_(["content container",{loaded:!o.loading}])},[a(p,null,{default:W(()=>[a(h,null,{default:W(()=>[k("Learning Darija")]),_:1})]),_:1}),i("div",st,[o.loading?(c(),H(b,{key:0,message:"Getting data...","dark-mode":!0})):g("",!0),a(B,null,{default:W(()=>[o.specificLession?(c(),d(w,{key:0},[a(p,null,{default:W(()=>[a(h,null,{default:W(()=>{var r;return[k("Learning "+f((r=o.specificLession)==null?void 0:r.title),1)]}),_:1})]),_:1}),i("div",it,[t[0]||(I(-1),t[0]=a(T,{border:!1,links:[{href:`/learning/${o.currentRouteId}`,label:o.specificLession.title},{href:`/learning/sentences/${o.specificLession.lession}`,label:"Sentences"}]},null,8,["links"]),I(1),t[0]),i("div",nt,[i("div",rt,[lt,X([n.learning],()=>a(L,{value:n.learning,"onUpdate:value":t[1]||(t[1]=r=>n.learning=r),class:"radio-buttons",items:["Arabic","English"]},null,8,["value"]),t,2)])]),n.askWhatToDo?g("",!0):(c(),d("div",ot,[i("div",{class:"what-to-do clickable",onClick:t[3]||(t[3]=r=>n.askWhatToDo=!0)}," Different learning method "),i("div",{class:"what-to-do clickable",onClick:t[4]||(t[4]=r=>s.learnStars(!0))}," Learns stars with hint "),i("div",{class:"what-to-do clickable",onClick:t[5]||(t[5]=r=>s.learnStars(!1))}," Learns stars "),i("div",{class:"what-to-do clickable",onClick:t[6]||(t[6]=(...r)=>s.shuffle&&s.shuffle(...r))},"Reshuffle"),i("div",{class:"what-to-do clickable",onClick:t[7]||(t[7]=(...r)=>s.unstarAll&&s.unstarAll(...r))}," Unstar all ")]))]),n.askWhatToDo?g("",!0):(c(),d("div",at,[i("div",{class:"what-to-do clickable",onClick:t[8]||(t[8]=r=>n.askWhatToDo=!0)}," Different learning method "),i("div",{class:"what-to-do clickable",onClick:t[9]||(t[9]=r=>s.learnStars(!0))}," Learns stars with hint "),i("div",{class:"what-to-do clickable",onClick:t[10]||(t[10]=r=>s.learnStars(!1))}," Learns stars "),i("div",{class:"what-to-do clickable",onClick:t[11]||(t[11]=(...r)=>s.shuffle&&s.shuffle(...r))},"Reshuffle"),i("div",{class:"what-to-do clickable",onClick:t[12]||(t[12]=(...r)=>s.unstarAll&&s.unstarAll(...r))}," Unstar all ")])),t[13]||(I(-1),t[13]=i("h2",{class:"title"},[k(" Learn "),i("span",ct,f(o.specificLession.title),1)]),I(1),t[13]),n.askWhatToDo?(c(),d("div",Nt,[yt,i("div",Dt,[i("button",{class:"button",onClick:t[24]||(t[24]=r=>s.whatToDoNext("learn-with-hint"))}," Learn with hint "),i("button",{class:"button",onClick:t[25]||(t[25]=r=>s.whatToDoNext("learn-no-hint"))}," Learn without hint ")])])):(c(),d("div",ht,[s.currentWord?(c(),d("div",dt,[n.settings.showHint?(c(),d(w,{key:0},[i("span",ut,f(s.currentWord.english),1),k(": "),i("span",ft,f(s.currentWord.arabic),1)],64)):(c(),d("h2",gt,[k(" What is the "+f(n.learning)+" word for ",1),i("span",pt,f(n.learning==="Arabic"?s.currentWord.english:s.currentWord.arabic),1),k(" ? ")]))])):g("",!0),i("div",xt,[i("div",vt,[a(u,{class:_({invincible:n.currentIndex===0}),clickable:n.currentIndex!==0,name:"chevron-left",onClick:s.goPrevious},null,8,["class","clickable","onClick"])]),i("div",kt,[y(i("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>n.inputText=r),type:"text",class:_({correct:n.correct,"in-correct":n.inCorrect}),placeholder:s.placeholderText,onInput:t[15]||(t[15]=r=>s.textChange(r))},null,42,mt),[[Y,n.inputText]]),i("div",Wt,[n.inputText!==""?(c(),d(w,{key:0},[a(u,{name:"cross",tooltip:"Clear text",width:"25px",height:"25px",onClick:t[16]||(t[16]=r=>n.inputText="")}),a(u,{name:"checkmark-rectangle",tooltip:"This word is correct",width:"25px",height:"25px",onClick:t[17]||(t[17]=r=>s.goNext(!0))})],64)):g("",!0),n.settings.showHint?g("",!0):(c(),d(w,{key:1},[s.showHintIcons?(c(),H(u,{key:0,tooltip:"Show hint",name:"progress-help",width:"25px",height:"25px",onClick:t[18]||(t[18]=r=>n.settings.hintLetters++)})):g("",!0),a(u,{name:"help",tooltip:n.settings.showWord?"Hide word":"Show word",width:"25px",height:"25px",onClick:t[19]||(t[19]=r=>n.settings.showWord=!n.settings.showWord)},null,8,["tooltip"])],64)),y(a(u,{name:"star-filled",width:"25px",tooltip:"Unstar this question",height:"25px",onClick:t[20]||(t[20]=r=>s.setStar(!1))},null,512),[[A,s.currentWord.star]]),y(a(u,{name:"star",tooltip:"Star this question",width:"25px",height:"25px",onClick:t[21]||(t[21]=r=>s.setStar(!0))},null,512),[[A,!s.currentWord.star]]),a(u,{name:"checkmark",width:"25px",tooltip:"Correct, next question",height:"25px",onClick:s.correctNextQuestion},null,8,["onClick"])])]),i("div",_t,[a(u,{class:"clickable",name:"chevron-right",onClick:t[22]||(t[22]=r=>s.goNext(!1))})])]),i("div",wt,[i("div",bt,[a(u,{class:_({invincible:n.currentIndex===0}),clickable:n.currentIndex!==0,name:"chevron-left",onClick:s.goPrevious},null,8,["class","clickable","onClick"])]),i("div",Tt,f(n.currentIndex+1)+" of the "+f(n.allWords.length)+" sentences ",1),i("div",Ct,[a(u,{class:"clickable",name:"chevron-right",onClick:t[23]||(t[23]=r=>s.goNext(!1))})])]),i("div",It,[i("ul",Lt,[(c(!0),d(w,null,Z(n.allWords,(r,S)=>(c(),d("li",{key:r.id,class:"page-item"},[i("div",{class:_(["page-link clickable",{clickable:r.visible,answered:r.correct,star:r.star,current:n.currentIndex===S}]),onClick:At=>n.currentIndex=S},[i("span",null,f(S+1),1)],10,St)]))),128))])])]))],64)):g("",!0)]),_:1})])],2)}const Pt=q(et,[["render",Ht],["__scopeId","data-v-39d4b65c"]]);export{Pt as default};
