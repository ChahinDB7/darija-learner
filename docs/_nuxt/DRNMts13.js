import{_ as k,H as j,a as A,T as H,b as P}from"./4OU-g_Ht.js";import{f as V,_ as C,o as l,c as d,a,b as i,n as p,g as S,v as $,h as z,i as x,d as v,t as _,r as R,j as b,k as g,M as G,l as O,m as w,q as J,s as K,w as h,u as B,F,x as q,p as Q,e as W}from"./CHGAFSrD.js";import{_ as X}from"./BANkqTWj.js";import{d as Y}from"./B64r8yJ8.js";import"./CdquDSsO.js";var M=/[\\^$.*+?()[\]{}|]/g,Z=RegExp(M.source);function ee(e){return e=V(e),e&&Z.test(e)?e.replace(M,"\\$&"):e}const te={name:"SearchBar",props:{value:{type:String,required:!0},disabled:{type:Boolean,default:!1,required:!1}},data(){return{search:this.value}},watch:{value(e,t){e!==t&&this.checked!==e&&(this.search=e)}},methods:{openSearch(){this.$refs.search.focus()},inputChange(e){const t=e.target.value;this.$emit("update:value",t),this.$emit("input",t)}}};function se(e,t,r,f,s,o){const m=k;return l(),d("div",{class:"search-box",onClick:t[2]||(t[2]=(...c)=>o.openSearch&&o.openSearch(...c))},[a("button",{class:p(["btn-search",{"has-search":s.search.length>0}])},[i(m,{name:"search"})],2),S(a("input",{ref:"search","onUpdate:modelValue":t[0]||(t[0]=c=>s.search=c),type:"text",class:p(["input-search no-css",{"has-search":s.search.length>0}]),placeholder:"Search",onInput:t[1]||(t[1]=c=>o.inputChange(c))},null,34),[[$,s.search]])])}const ne=C(te,[["render",se],["__scopeId","data-v-08f1a39e"]]),ae={name:"AccordionPanel",props:{value:{type:Boolean,required:!1,default:null},title:{type:String,required:!1,default:null},showScrollbar:{type:Boolean,required:!1,default:!1},expanded:{type:Boolean,required:!1,default:!1},hideChevron:{type:Boolean,required:!1,default:!1}},data(){return{id:this.generateRandomId(),open:this.expanded}},watch:{value(e,t){e!==t&&(this.open=e)},open:{handler(e,t){t!==e&&this.$emit("collapsed",e)}}},methods:{generateRandomId(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let t="";for(let r=0;r<5;r++){const f=Math.floor(Math.random()*e.length);t+=e.charAt(f)}return t}}},oe={class:"c"},re=["id"],le={class:"header no-select"},ce={class:"content"};function ie(e,t,r,f,s,o){const m=k;return l(),d("div",{class:p(["panel",{"has-scroll":r.showScrollbar}])},[a("div",oe,[S(a("input",{id:s.id,"onUpdate:modelValue":t[0]||(t[0]=c=>s.open=c),type:"checkbox"},null,8,re),[[z,s.open]]),a("div",le,[a("label",{onClick:t[2]||(t[2]=x(c=>s.open=!s.open,["self"]))},[r.title?(l(),d("span",{key:0,class:"title",onClick:t[1]||(t[1]=x(c=>s.open=!s.open,["self"]))},[v(_(r.title)+" ",1),R(e.$slots,"header",{},void 0,!0)])):b("",!0),r.hideChevron?b("",!0):(l(),g(m,{key:1,name:"chevron-down",class:p(["chevron",{up:s.open}])},null,8,["class"]))])]),a("div",{class:p(["p is-thumb",{"has-scroll":r.showScrollbar}])},[a("div",ce,[R(e.$slots,"default",{},void 0,!0)])],2)])],2)}const de=C(ae,[["render",ie],["__scopeId","data-v-ee7f20d1"]]),ue={name:"Learning",setup(){return{mainStore:G()}},data(){return{darijaLib:O,debouncedSearch:Y(this.doSearch,1e3),search:"",searchResults:[]}},computed:{mainStoreComputed(){return w(this.mainStore.$state)?{}:this.mainStore.$state},loading(){return w(this.mainStoreComputed.loading)?!0:this.mainStoreComputed.loading}},watch:{search(e,t){e!==t&&this.debouncedSearch()}},methods:{isFavorited(e){return e.favorite},toggleFavorite(e){this.mainStore.setFavorite(e)},doSearch(){if(this.search===""){this.searchResults=[];return}const e=this.mainStoreComputed.allData,t=new RegExp(ee(this.search),"i");this.searchResults=J(e,r=>t.test(r.title)||t.test(r.english)||t.test(r.arabic))}}},he=e=>(Q("data-v-96e97649"),e=e(),W(),e),pe={class:"body"},_e={class:"title"},me=he(()=>a("span",null,"Learning Darija",-1)),fe={class:"words is-thumb"},ve={class:""},ge={class:"gold"},Se={key:1,class:"search-result is-thumb"},xe={class:""},be={class:"gold"};function ke(e,t,r,f,s,o){const m=H,c=j,E=ne,L=P,y=k,I=X,D=de,N=K("masonry-wall"),T=A;return l(),d("div",{class:p(["content container",{loaded:!o.loading}])},[i(c,null,{default:h(()=>[i(m,null,{default:h(()=>[v("Learning Darija")]),_:1})]),_:1}),a("div",pe,[a("h2",_e,[me,i(E,{value:s.search,"onUpdate:value":t[0]||(t[0]=n=>s.search=n),disabled:o.loading},null,8,["value","disabled"])]),o.loading?(l(),g(L,{key:0,message:"Getting data...","dark-mode":!0})):b("",!0),i(T,null,{default:h(()=>[!o.loading&&s.searchResults.length<=0?(l(),g(N,{key:0,items:o.mainStoreComputed.arabic,"min-columns":1,"max-columns":2,"scroll-container":!0,"column-width":400,gap:40,class:"board"},{default:h(({item:n})=>[(l(),d("div",{key:e.index,class:p(["card-container",{sentences:n.hasSentences}])},[i(D,{value:n.open,"onUpdate:value":u=>n.open=u,class:"card-item",title:n.title,expanded:o.isFavorited(n)},{header:h(()=>[a("span",null,"("+_(n.data.length)+")",1),a("span",null,[S(i(y,{name:"heart-filled",class:"favorite-icon",onClick:x(u=>o.toggleFavorite(n),["stop"])},null,8,["onClick"]),[[B,o.isFavorited(n)]]),S(i(y,{class:"favorite-icon",name:"empty-heart",onClick:x(u=>o.toggleFavorite(n),["stop"])},null,8,["onClick"]),[[B,!o.isFavorited(n)]])])]),default:h(()=>[i(I,{class:"no-underline",to:`/learning/${n.lession}`},{default:h(()=>[a("div",fe,[(l(!0),d(F,null,q(n.data,(u,U)=>(l(),d("div",{key:U},[a("span",ve,_(u.english),1),v(": "),a("span",ge,_(u.arabic),1)]))),128))])]),_:2},1032,["to"])]),_:2},1032,["value","onUpdate:value","title","expanded"])],2))]),_:1},8,["items"])):o.loading?b("",!0):(l(),d("div",Se,[(l(!0),d(F,null,q(s.searchResults,(n,u)=>(l(),g(I,{key:u,to:`/learning/${n.lession}`,class:"card-item"},{default:h(()=>[a("span",xe,_(n.english),1),v(": "),a("span",be,_(n.arabic),1)]),_:2},1032,["to"]))),128))]))]),_:1})])],2)}const Be=C(ue,[["render",ke],["__scopeId","data-v-96e97649"]]);export{Be as default};
